{"version":3,"sources":["../../../src/js/displayResult.js"],"names":["console","log","require","allData","JSON","parse","localStorage","getItem","targetNode","$","forEach","DRsearchBar","val","bind","event","window","keyCode","DRsearchInfo","length","ajax","open","setRequestHeader","onreadystatechange","readyState","responseText","setItem","stringify","sendData","keyword","searchInfo","path","searchPath","send","live","index","attr","largeURL","html","largePATH","addClass","fadeIn","click","fadeOut","removeClass","particlesJS","load"],"mappings":";;AASA;;;;AACA;;;;;;AAVA;;;AAGAA,QAAQC,GAAR,CAAY,0BAAZ;AACAC,QAAQ,6BAAR;AACAA,QAAQ,oCAAR;AACAA,QAAQ,gCAAR;AACAA,QAAS,oBAAT;AACAA,QAAQ,aAAR;;AAGA,IAAIC,UAAUC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,KAArB,CAAX,CAAd;AACA,IAAMC,aAAaC,EAAE,iBAAF,CAAnB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,qBAAMD,UAAN;AACAL,QAAQO,OAAR;;AAEA,IAAMC,cAAcF,EAAE,kBAAF,CAApB;AACAE,YAAYC,GAAZ,CAAgBN,aAAa,YAAb,CAAhB;;AAEA;AACAK,YAAYE,IAAZ,CAAiB,OAAjB,EAAyB,UAASC,KAAT,EAAgB;AAAI;AACzCA,YAAQA,SAASC,OAAOD,KAAxB;AACA,QAAIA,MAAME,OAAN,KAAkB,EAAtB,EAA0B;AACtB,YAAIC,eAAeN,YAAYC,GAAZ,EAAnB;AACA,YAAIK,aAAaC,MAAb,KAAwB,CAA5B,EAA+B;AAC3BZ,yBAAa,YAAb,IAA6BW,YAA7B;AACAR,cAAE,kBAAF,EAAsBG,GAAtB,CAA0BN,aAAa,YAAb,CAA1B;;AAEAa,iBAAKC,IAAL,CAAU,MAAV,EAAiB,8BAAjB,EAAgD,IAAhD;AACAD,iBAAKE,gBAAL,CAAsB,cAAtB,EAAqC,kBAArC;AACAF,iBAAKG,kBAAL,GAA0B,YAAW;AACjCtB,wBAAQC,GAAR,CAAY,KAAKsB,UAAjB;AACA,oBAAI,KAAKA,UAAL,KAAoB,CAAxB,EAA2B;AAAI;AAC3BvB,4BAAQC,GAAR,CAAY,KAAKuB,YAAjB;AACAlB,iCAAamB,OAAb,CAAqB,KAArB,EAA2BrB,KAAKsB,SAAL,CAAe,KAAKF,YAApB,CAA3B;AACArB,8BAAUC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,KAArB,CAAX,CAAV;;AAEA;;;;;;;AAOH;AACJ,aAfD;AAgBAoB,qBAASC,OAAT,GAAmBC,UAAnB;AACAF,qBAASG,IAAT,GAAgBC,UAAhB;AACA;AACAZ,iBAAKa,IAAL,CAAU5B,KAAKsB,SAAL,CAAeC,QAAf,CAAV;;AAGA,iCAAMnB,UAAN;AACAL,oBAAQO,OAAR;AACA;;AAGH,SAjCD,MAiCO,CACN;AACJ;AACJ,CAxCD,EAwCE,KAxCF;;AA0CAD,EAAE,gBAAF,EAAoBwB,IAApB,CAAyB,OAAzB,EAAkC,YAAW;AACzC,QAAIC,QAAQzB,EAAE,IAAF,EAAQ0B,IAAR,CAAa,SAAb,CAAZ;AACA1B,MAAE,YAAF,EAAgB0B,IAAhB,CAAqB,KAArB,EAA4BhC,QAAQ+B,KAAR,EAAeE,QAA3C;AACA3B,MAAE,WAAF,EAAe4B,IAAf,CAAoBlC,QAAQ+B,KAAR,EAAeI,SAAnC;;AAEA7B,MAAE,iBAAF,EAAqB8B,QAArB,CAA8B,oBAA9B;AACA9B,MAAE,0BAAF,EAA8B+B,MAA9B,CAAqC,GAArC;AACH,CAPD;AAQA/B,EAAE,gBAAF,EAAoBgC,KAApB,CAA0B,YAAW;AACjChC,MAAE,0BAAF,EAA8BiC,OAA9B,CAAsC,GAAtC;AACAjC,MAAE,iBAAF,EAAqBkC,WAArB,CAAiC,oBAAjC;AACH,CAHD;AAIAC,YAAYC,IAAZ,CAAiB,cAAjB,EAAiC,gCAAjC,EAAmE,YAAW;AAC1E7C,YAAQC,GAAR,CAAY,uCAAZ;AACH,CAFD","file":"displayResult.js","sourcesContent":["/**\n * Created by petnakanojo on 29/07/2017.\n */\nconsole.log(\"This is displayResult.js\");\nrequire(\"../styles/common/common.css\");\nrequire(\"../styles/common/nav-container.css\");\nrequire(\"../styles/DR/displayResult.css\");\nrequire ('./lib/particles.js');\nrequire(\"./DR/render\");\nimport clear from './clear';\nimport render from './DR/render';\nlet allData = JSON.parse(localStorage.getItem(\"ddd\"));\nconst targetNode = $(\"#render-picture\");\n/*\nconst allData = [\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/favicon.ico\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n];\n*/\nclear(targetNode);\nallData.forEach(render);\n\nconst DRsearchBar = $(\"#DR-search-input\");\nDRsearchBar.val(localStorage[\"searchInfo\"]);\n\n//监听搜索的回车事件，并进一步执行程序。监听到有输入即跳转到搜索结果的页面\nDRsearchBar.bind(\"keyup\",function(event) {   //监听回车事件\n    event = event || window.event;\n    if (event.keyCode === 13) {\n        let DRsearchInfo = DRsearchBar.val();\n        if (DRsearchInfo.length !== 0) {\n            localStorage[\"searchInfo\"] = DRsearchInfo;\n            $(\"#DR-search-input\").val(localStorage[\"searchInfo\"]);\n\n            ajax.open(\"POST\",\"http://localhost:5000/search\",true);\n            ajax.setRequestHeader(\"Content-type\",\"application/json\");\n            ajax.onreadystatechange = function() {\n                console.log(this.readyState);\n                if (this.readyState === 4) {   //Todo\n                    console.log(this.responseText);\n                    localStorage.setItem(\"ddd\",JSON.stringify(this.responseText));\n                    allData = JSON.parse(localStorage.getItem(\"ddd\"));\n\n                    /*allData = [\n                     {\n                     smallURL: \"../static/img/banner.jpg\",\n                     largeURL: \"../static/img/banner.jpg\",\n                     largePATH: \"../static/img/banner.jpg\",\n                     }\n                     ];*/\n                }\n            };\n            sendData.keyword = searchInfo;\n            sendData.path = searchPath;\n            //这里要向服务器发送请求。\n            ajax.send(JSON.stringify(sendData));\n\n\n            clear(targetNode);\n            allData.forEach(render);\n            //这里要向服务器发请求\n\n\n        } else {\n        }\n    }\n},false);\n\n$(\".pic-container\").live(\"click\", function() {\n    let index = $(this).attr(\"data-id\");\n    $(\"#large-pic\").attr(\"src\", allData[index].largeURL);\n    $(\"#pic-path\").html(allData[index].largePATH);\n\n    $(\"#render-picture\").addClass(\"blur-display-heavy\");\n    $(\"#display-large-container\").fadeIn(100);\n});\n$(\"#close-display\").click(function() {\n    $(\"#display-large-container\").fadeOut(100);\n    $(\"#render-picture\").removeClass(\"blur-display-heavy\");\n});\nparticlesJS.load('particles-js', \"../../../assets/particles.json\", function() {\n    console.log('callback - particles.js config loaded');\n});\n\n"]}