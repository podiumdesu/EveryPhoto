{"version":3,"sources":["../../../src/js/displayResult.js"],"names":["console","log","require","allData","JSON","parse","localStorage","getItem","data","targetNode","$","forEach","ajax","XMLHttpRequest","sendData","DRsearchBar","val","bind","event","window","keyCode","DRsearchInfo","length","open","setRequestHeader","onreadystatechange","readyState","responseText","setItem","keyword","path","send","stringify","live","index","attr","largeURL","html","largePATH","addClass","fadeIn","click","fadeOut","removeClass","particlesJS","load"],"mappings":";;AASA;;;;AACA;;;;AACA;;;;AAXA;;;AAGAA,QAAQC,GAAR,CAAY,0BAAZ;AACAC,QAAQ,6BAAR;AACAA,QAAQ,oCAAR;AACAA,QAAQ,gCAAR;AACAA,QAAS,oBAAT;AACAA,QAAQ,aAAR;;;AAKA,IAAIC,UAAUC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,KAArB,CAAX,EAAwCC,IAAtD;AACA,IAAMC,aAAaC,EAAE,iBAAF,CAAnB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,qBAAMD,UAAN;AACAN,QAAQQ,OAAR;;AAEA,IAAIC,OAAO,IAAIC,cAAJ,EAAX;AACA,IAAIC,WAAW,EAAf;;AAEA,IAAMC,cAAcL,EAAE,kBAAF,CAApB;AACAK,YAAYC,GAAZ,CAAgBV,aAAa,YAAb,CAAhB;;AAEA;AACAS,YAAYE,IAAZ,CAAiB,OAAjB,EAAyB,UAASC,KAAT,EAAgB;AAAI;AACzCA,YAAQA,SAASC,OAAOD,KAAxB;AACA,QAAIA,MAAME,OAAN,KAAkB,EAAtB,EAA0B;AACtB,YAAIC,eAAeN,YAAYC,GAAZ,EAAnB;AACA,YAAIK,aAAaC,MAAb,KAAwB,CAA5B,EAA+B;AAC3BhB,yBAAa,YAAb,IAA6Be,YAA7B;AACAX,cAAE,kBAAF,EAAsBM,GAAtB,CAA0BV,aAAa,YAAb,CAA1B;;AAEAM,iBAAKW,IAAL,CAAU,MAAV,EAAiB,SAAjB,EAA2B,IAA3B;AACAX,iBAAKY,gBAAL,CAAsB,cAAtB,EAAqC,kBAArC;AACAZ,iBAAKa,kBAAL,GAA0B,YAAW;AACjCzB,wBAAQC,GAAR,CAAY,KAAKyB,UAAjB;AACA,oBAAI,KAAKA,UAAL,KAAoB,CAAxB,EAA2B;AAAI;AAC3B1B,4BAAQC,GAAR,CAAY,KAAK0B,YAAjB;AACArB,iCAAasB,OAAb,CAAqB,KAArB,EAA4B,KAAKD,YAAjC;AACAxB,8BAAUC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,KAArB,CAAX,EAAwCC,IAAlD;AACA,yCAAMC,UAAN;AACAN,4BAAQQ,OAAR;;AAEA;;;;;;;AAOH;AACJ,aAjBD;AAkBAG,qBAASe,OAAT,GAAmBR,YAAnB;AACAP,qBAASgB,IAAT;AACA;AACAlB,iBAAKmB,IAAL,CAAU3B,KAAK4B,SAAL,CAAelB,QAAf,CAAV;;AAGA,iCAAML,UAAN;AACAN,oBAAQQ,OAAR;AACA;;AAGH,SAnCD,MAmCO,CACN;AACJ;AACJ,CA1CD,EA0CE,KA1CF;;AA4CAD,EAAE,gBAAF,EAAoBuB,IAApB,CAAyB,OAAzB,EAAkC,YAAW;AACzC,QAAIC,QAAQxB,EAAE,IAAF,EAAQyB,IAAR,CAAa,SAAb,CAAZ;AACAzB,MAAE,YAAF,EAAgByB,IAAhB,CAAqB,KAArB,EAA4BhC,QAAQ+B,KAAR,EAAeE,QAA3C;AACA1B,MAAE,WAAF,EAAe2B,IAAf,CAAoBlC,QAAQ+B,KAAR,EAAeI,SAAnC;;AAEA5B,MAAE,iBAAF,EAAqB6B,QAArB,CAA8B,oBAA9B;AACA7B,MAAE,0BAAF,EAA8B8B,MAA9B,CAAqC,GAArC;AACH,CAPD;AAQA9B,EAAE,gBAAF,EAAoB+B,KAApB,CAA0B,YAAW;AACjC/B,MAAE,0BAAF,EAA8BgC,OAA9B,CAAsC,GAAtC;AACAhC,MAAE,iBAAF,EAAqBiC,WAArB,CAAiC,oBAAjC;AACH,CAHD;AAIAC,YAAYC,IAAZ,CAAiB,cAAjB,EAAiC,gCAAjC,EAAmE,YAAW;AAC1E7C,YAAQC,GAAR,CAAY,uCAAZ;AACH,CAFD","file":"displayResult.js","sourcesContent":["/**\n * Created by petnakanojo on 29/07/2017.\n */\nconsole.log(\"This is displayResult.js\");\nrequire(\"../styles/common/common.css\");\nrequire(\"../styles/common/nav-container.css\");\nrequire(\"../styles/DR/displayResult.css\");\nrequire ('./lib/particles.js');\nrequire(\"./DR/render\");\nimport clear from './clear';\nimport render from './DR/render';\nimport {searchPath} from './myGallery';\n\nlet allData = JSON.parse(localStorage.getItem(\"ddd\")).data;\nconst targetNode = $(\"#render-picture\");\n/*\nconst allData = [\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/favicon.ico\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    },\n];\n*/\nclear(targetNode);\nallData.forEach(render);\n\nlet ajax = new XMLHttpRequest();\nlet sendData = {};\n\nconst DRsearchBar = $(\"#DR-search-input\");\nDRsearchBar.val(localStorage[\"searchInfo\"]);\n\n//监听搜索的回车事件，并进一步执行程序。监听到有输入即跳转到搜索结果的页面\nDRsearchBar.bind(\"keyup\",function(event) {   //监听回车事件\n    event = event || window.event;\n    if (event.keyCode === 13) {\n        let DRsearchInfo = DRsearchBar.val();\n        if (DRsearchInfo.length !== 0) {\n            localStorage[\"searchInfo\"] = DRsearchInfo;\n            $(\"#DR-search-input\").val(localStorage[\"searchInfo\"]);\n\n            ajax.open(\"POST\",\"/search\",true);\n            ajax.setRequestHeader(\"Content-type\",\"application/json\");\n            ajax.onreadystatechange = function() {\n                console.log(this.readyState);\n                if (this.readyState === 4) {   //Todo\n                    console.log(this.responseText);\n                    localStorage.setItem(\"ddd\", this.responseText);\n                    allData = JSON.parse(localStorage.getItem(\"ddd\")).data;\n                    clear(targetNode);\n                    allData.forEach(render);\n\n                    /*allData = [\n                     {\n                     smallURL: \"../static/img/banner.jpg\",\n                     largeURL: \"../static/img/banner.jpg\",\n                     largePATH: \"../static/img/banner.jpg\",\n                     }\n                     ];*/\n                }\n            };\n            sendData.keyword = DRsearchInfo;\n            sendData.path = searchPath;\n            //这里要向服务器发送请求。\n            ajax.send(JSON.stringify(sendData));\n\n\n            clear(targetNode);\n            allData.forEach(render);\n            //这里要向服务器发请求\n\n\n        } else {\n        }\n    }\n},false);\n\n$(\".pic-container\").live(\"click\", function() {\n    let index = $(this).attr(\"data-id\");\n    $(\"#large-pic\").attr(\"src\", allData[index].largeURL);\n    $(\"#pic-path\").html(allData[index].largePATH);\n\n    $(\"#render-picture\").addClass(\"blur-display-heavy\");\n    $(\"#display-large-container\").fadeIn(100);\n});\n$(\"#close-display\").click(function() {\n    $(\"#display-large-container\").fadeOut(100);\n    $(\"#render-picture\").removeClass(\"blur-display-heavy\");\n});\nparticlesJS.load('particles-js', \"../../../assets/particles.json\", function() {\n    console.log('callback - particles.js config loaded');\n});\n\n"]}