{"version":3,"sources":["../../../src/js/index.js"],"names":["require","console","log","allData","JSON","parse","localStorage","getItem","particlesJS","load","sendData","ajax","XMLHttpRequest","searchBar","$","searchInfo","val","bind","event","window","keyCode","length","location","href","open","setRequestHeader","onreadystatechange","readyState","responseText","forEach","render","keyword","path","send","stringify"],"mappings":";;;;;;;AAQA;;AARAA,QAAS,uBAAT;AACAC,QAAQC,GAAR,CAAY,KAAZ;AACAF,QAAS,oBAAT;AACAA,QAAS,6BAAT;AACAA,QAAS,oCAAT;AACAA,QAAS,gCAAT;AACAA,QAAS,aAAT;AACO,IAAIG,kCAAJ;;AAEPF,QAAQC,GAAR,CAAY,kBAAZ;AACAD,QAAQC,GAAR;AACAD,QAAQC,GAAR,CAAYE,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,YAArB,CAAX,CAAZ;AACA,QALWJ,OAKX,aAAU,EAAV;AACAF,QAAQC,GAAR,CAAY,kBAAZ;AACA;AACAM,YAAYC,IAAZ,CAAiB,cAAjB,EAAiC,gCAAjC,EAAmE,YAAW;AAC1ER,YAAQC,GAAR,CAAY,uCAAZ;AACH,CAFD;;AAKA,IAAIQ,WAAW,EAAf;AACA;;;;;;;;;;AAUA,IAAIC,OAAO,IAAIC,cAAJ,EAAX;;AAEA;;;;;AAKA,IAAMC,YAAYC,EAAE,eAAF,CAAlB;AACA,IAAIC,aAAaF,UAAUG,GAAV,EAAjB;AACA;AACAH,UAAUI,IAAV,CAAe,OAAf,EAAuB,UAASC,KAAT,EAAgB;AAAK;AACxC,QAAIH,aAAaF,UAAUG,GAAV,EAAjB;AACAE,YAAQA,SAASC,OAAOD,KAAxB;AACA,QAAIA,MAAME,OAAN,KAAkB,EAAtB,EAA0B;AACtB,YAAIL,WAAWM,MAAX,KAAsB,CAA1B,EAA6B;AACzBF,mBAAOG,QAAP,CAAgBC,IAAhB,GAAuB,6BAAvB,CADyB,CAC+B;AACxDjB,yBAAa,YAAb,IAA6BS,UAA7B;;AAEAJ,iBAAKa,IAAL,CAAU,MAAV,EAAiB,8BAAjB,EAAgD,IAAhD;AACAb,iBAAKc,gBAAL,CAAsB,cAAtB,EAAqC,kBAArC;AACAd,iBAAKe,kBAAL,GAAyB,YAAW;AAChCzB,wBAAQC,GAAR,CAAY,KAAKyB,UAAjB;AACA,oBAAI,KAAKA,UAAL,KAAoB,CAAxB,EAA2B;AAAI;AAC3B1B,4BAAQC,GAAR,CAAY,KAAK0B,YAAjB;AACA,4BAhDTzB,OAgDS,aAAUC,KAAKC,KAAL,CAAW,KAAKuB,YAAhB,CAAV;AACAzB,4BAAQ0B,OAAR,CAAgBC,MAAhB;AACH;AACJ,aAPD;AAQApB,qBAASqB,OAAT,GAAmBhB,UAAnB;AACAL,qBAASsB,IAAT;AACA;AACArB,iBAAKsB,IAAL,CAAU7B,KAAK8B,SAAL,CAAexB,QAAf,CAAV;AACH,SAlBD,MAkBM,CACL;AACJ;AACJ,CAzBD,EAyBE,KAzBF","file":"index.js","sourcesContent":["require ('./index/indexentry.js');\nconsole.log(\"ddd\");\nrequire ('./lib/particles.js');\nrequire ('../styles/common/common.css');\nrequire ('../styles/common/nav-container.css');\nrequire ('../styles/index/search-bar.css');\nrequire ('./DR/render');\nexport let allData;\nimport {searchPath} from './myGallery';\nconsole.log(\"This is index.js\");\nconsole.log(searchPath);\nconsole.log(JSON.parse(localStorage.getItem(\"searchPath\")));\nallData = [];\nconsole.log(\"This is index.js\");\n/* particlesJS.load(@dom-id, @path-json, @callback (optional)); */\nparticlesJS.load('particles-js', \"../../../assets/particles.json\", function() {\n    console.log('callback - particles.js config loaded');\n});\n\n\nlet sendData = {};\n/*\nconst allData = [\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    }\n];\n*/\n\nlet ajax = new XMLHttpRequest();\n\n/*\najax.open(\"POST\",\"/search\",true);\najax.setRequestHeader(\"Content-type\",\"application/json\");\najax.send(JSON.stringify(data));\n*/\nconst searchBar = $(\"#search-input\");\nlet searchInfo = searchBar.val();\n//监听搜索的回车事件，并进一步执行程序。监听到有输入即跳转到搜索结果的页面\nsearchBar.bind(\"keyup\",function(event) {    //监听回车事件\n    let searchInfo = searchBar.val();\n    event = event || window.event;\n    if (event.keyCode === 13) {\n        if (searchInfo.length !== 0) {\n            window.location.href = '../../../displayResult.html';   //跳转页面\n            localStorage[\"searchInfo\"] = searchInfo;\n\n            ajax.open(\"POST\",\"http://localhost:5000/search\",true);\n            ajax.setRequestHeader(\"Content-type\",\"application/json\");\n            ajax.onreadystatechange= function() {\n                console.log(this.readyState);\n                if (this.readyState === 4) {   //Todo\n                    console.log(this.responseText);\n                    allData = JSON.parse(this.responseText);\n                    allData.forEach(render);\n                }\n            };\n            sendData.keyword = searchInfo;\n            sendData.path = searchPath;\n            //这里要向服务器发送请求。\n            ajax.send(JSON.stringify(sendData));\n        }else {\n        }\n    }\n},false);\n"]}