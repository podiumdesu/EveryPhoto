{"version":3,"sources":["../../../src/js/index.js"],"names":["require","console","log","allData","particlesJS","load","sendData","ajax","XMLHttpRequest","searchBar","$","searchInfo","val","bind","event","window","keyCode","length","location","href","localStorage","open","setRequestHeader","onreadystatechange","readyState","cosnole","responseText","JSON","parse","forEach","render","keyword","path","send","stringify"],"mappings":";;;;;;;AAQA;;AARAA,QAAS,uBAAT;AACAC,QAAQC,GAAR,CAAY,KAAZ;AACAF,QAAS,oBAAT;AACAA,QAAS,6BAAT;AACAA,QAAS,oCAAT;AACAA,QAAS,gCAAT;;AAEO,IAAIG,kCAAJ;;AAEP,QAFWA,OAEX,aAAU,EAAV;AACAF,QAAQC,GAAR,CAAY,kBAAZ;AACA;AACAE,YAAYC,IAAZ,CAAiB,cAAjB,EAAiC,gCAAjC,EAAmE,YAAW;AAC1EJ,YAAQC,GAAR,CAAY,uCAAZ;AACH,CAFD;;AAKA,IAAII,WAAW,EAAf;AACA;;;;;;;;;;AAUA,IAAIC,OAAO,IAAIC,cAAJ,EAAX;;AAEA;;;;;AAKA,IAAMC,YAAYC,EAAE,eAAF,CAAlB;AACA,IAAIC,aAAaF,UAAUG,GAAV,EAAjB;AACA;AACAH,UAAUI,IAAV,CAAe,OAAf,EAAuB,UAASC,KAAT,EAAgB;AAAK;AACxC,QAAIH,aAAaF,UAAUG,GAAV,EAAjB;AACAE,YAAQA,SAASC,OAAOD,KAAxB;AACA,QAAIA,MAAME,OAAN,KAAkB,EAAtB,EAA0B;AACtB,YAAIL,WAAWM,MAAX,KAAsB,CAA1B,EAA6B;AACzBF,mBAAOG,QAAP,CAAgBC,IAAhB,GAAuB,6BAAvB,CADyB,CAC+B;AACxDC,yBAAa,YAAb,IAA6BT,UAA7B;;AAEAJ,iBAAKc,IAAL,CAAU,MAAV,EAAiB,8BAAjB,EAAgD,IAAhD;AACAd,iBAAKe,gBAAL,CAAsB,cAAtB,EAAqC,kBAArC;AACAf,iBAAKgB,kBAAL,GAAyB,YAAW;AAChCtB,wBAAQC,GAAR,CAAY,KAAKsB,UAAjB;AACA,oBAAI,KAAKA,UAAL,KAAoB,CAAxB,EAA2B;AAAI;AAC3BC,4BAAQvB,GAAR,CAAY,KAAKwB,YAAjB;AACA,4BA7CTvB,OA6CS,aAAUwB,KAAKC,KAAL,CAAWF,YAAX,CAAV;AACAvB,4BAAQ0B,OAAR,CAAgBC,MAAhB;AACH;AACJ,aAPD;AAQAxB,qBAASyB,OAAT,GAAmBpB,UAAnB;AACAL,qBAAS0B,IAAT;AACA;AACAzB,iBAAK0B,IAAL,CAAUN,KAAKO,SAAL,CAAe5B,QAAf,CAAV;AACH,SAlBD,MAkBM,CACL;AACJ;AACJ,CAzBD,EAyBE,KAzBF","file":"index.js","sourcesContent":["require ('./index/indexentry.js');\nconsole.log(\"ddd\");\nrequire ('./lib/particles.js');\nrequire ('../styles/common/common.css');\nrequire ('../styles/common/nav-container.css');\nrequire ('../styles/index/search-bar.css');\n\nexport let allData;\nimport {searchPath} from './myGallery';\nallData = [];\nconsole.log(\"This is index.js\");\n/* particlesJS.load(@dom-id, @path-json, @callback (optional)); */\nparticlesJS.load('particles-js', \"../../../assets/particles.json\", function() {\n    console.log('callback - particles.js config loaded');\n});\n\n\nlet sendData = {};\n/*\nconst allData = [\n    {\n        smallURL: \"../static/img/banner.jpg\",\n        largeURL: \"../static/img/banner.jpg\",\n        largePATH: \"../static/img/banner.jpg\",\n    }\n];\n*/\n\nlet ajax = new XMLHttpRequest();\n\n/*\najax.open(\"POST\",\"/search\",true);\najax.setRequestHeader(\"Content-type\",\"application/json\");\najax.send(JSON.stringify(data));\n*/\nconst searchBar = $(\"#search-input\");\nlet searchInfo = searchBar.val();\n//监听搜索的回车事件，并进一步执行程序。监听到有输入即跳转到搜索结果的页面\nsearchBar.bind(\"keyup\",function(event) {    //监听回车事件\n    let searchInfo = searchBar.val();\n    event = event || window.event;\n    if (event.keyCode === 13) {\n        if (searchInfo.length !== 0) {\n            window.location.href = '../../../displayResult.html';   //跳转页面\n            localStorage[\"searchInfo\"] = searchInfo;\n\n            ajax.open(\"POST\",\"http://localhost:5000/search\",true);\n            ajax.setRequestHeader(\"Content-type\",\"application/json\");\n            ajax.onreadystatechange= function() {\n                console.log(this.readyState);\n                if (this.readyState === 4) {   //Todo\n                    cosnole.log(this.responseText);\n                    allData = JSON.parse(responseText);\n                    allData.forEach(render);\n                }\n            };\n            sendData.keyword = searchInfo;\n            sendData.path = searchPath;\n            //这里要向服务器发送请求。\n            ajax.send(JSON.stringify(sendData));\n        }else {\n        }\n    }\n},false);\n"]}