{"version":3,"sources":["../../../src/js/myGallery.js"],"names":["console","log","require","searchPath","searchPathArray","JSON","parse","localStorage","getItem","targetNode","$","storedLIBData","divContainer","document","createElement","setAttribute","className","innerHTML","length","forEach","append","live","addClass","fadeIn","indexOf","parseInt","parent","attr","push","setItem","stringify","children","html","concat","removeClass","index","splice","pathlength","pathindex","replace","click","newLIB","name","val","path","fadeOut","alert"],"mappings":";;;;;;;;;AAKA;;AACA;;;;AACA;;;;;;AAPAA,QAAQC,GAAR,CAAY,sBAAZ;AACAD,QAAQC,GAAR,CAAY,IAAZ;AACAC,QAAQ,6BAAR;AACAA,QAAQ,oCAAR;AACAA,QAAQ,4BAAR;AAIO,IAAIC,wCAAJ;AACP,QADWA,UACX,gBAAa,EAAb;AACA;AACA;AACA,IAAIC,kBAAkBC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,iBAArB,CAAX,CAAtB;AACA,QALWL,UAKX,gBAAaE,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,YAArB,CAAX,CAAb;;AAEA,IAAMC,aAAaC,EAAE,oBAAF,CAAnB;AACA,IAAIC,sBAAJ;AACA,IAAIC,eAAeC,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACAF,aAAaG,YAAb,CAA0B,IAA1B,EAA+B,qBAA/B;AACAH,aAAaI,SAAb,IAA0B,QAA1B;AACAJ,aAAaK,SAAb;;AAQAN,gBAAgBN,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,KAArB,CAAX,CAAhB;AACA,IAAIG,cAAcO,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,yBAAMT,UAAN;AACAE,kBAAcQ,OAAd;AACH;AACDV,WAAWW,MAAX,CAAkBR,YAAlB;;AAGAF,EAAE,YAAF,EAAgBW,IAAhB,CAAqB,OAArB,EAA8B,YAAW;AACrCrB,YAAQC,GAAR,CAAY,KAAZ;AACAS,MAAE,SAAF,EAAaY,QAAb,CAAsB,cAAtB;AACAZ,MAAE,YAAF,EAAgBa,MAAhB,CAAuB,GAAvB;AACH,CAJD;;AAMA;;;;;;;;;;;;;;;;;;;;;;AAsBA;AACAb,EAAE,cAAF,EAAkBW,IAAlB,CAAuB,OAAvB,EAA+B,YAAW;AACtC,QAAKhB,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,iBAArB,CAAX,CAAD,CAAsDgB,OAAtD,CAA8DC,SAASf,EAAE,IAAF,EAAQgB,MAAR,CAAe,SAAf,EAA0BC,IAA1B,CAA+B,SAA/B,CAAT,CAA9D,IAAqH,CAAzH,EAA6H;AACzH3B,gBAAQC,GAAR,CAAYS,EAAE,IAAF,EAAQgB,MAAR,CAAe,SAAf,EAA0BC,IAA1B,CAA+B,SAA/B,CAAZ;AACA3B,gBAAQC,GAAR,CAAY,QAAMI,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,iBAArB,CAAX,CAAlB;AACAR,gBAAQC,GAAR,CAAaI,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,iBAArB,CAAX,CAAD,CAAsDgB,OAAtD,CAA8Dd,EAAE,IAAF,EAAQgB,MAAR,CAAe,SAAf,EAA0BC,IAA1B,CAA+B,SAA/B,CAA9D,CAAZ;AACA3B,gBAAQC,GAAR,CAAY,KAAZ;AACAS,UAAE,IAAF,EAAQgB,MAAR,CAAe,SAAf,EAA0BC,IAA1B,CAA+B,aAA/B,EAA6C,KAA7C;AACAjB,UAAE,IAAF,EAAQY,QAAR,CAAiB,QAAjB;;AAEAlB,wBAAgBwB,IAAhB,CAAqBH,SAASf,EAAE,IAAF,EAAQgB,MAAR,CAAe,SAAf,EAA0BC,IAA1B,CAA+B,SAA/B,CAAT,CAArB;AACApB,qBAAasB,OAAb,CAAqB,iBAArB,EAAuCxB,KAAKyB,SAAL,CAAe1B,eAAf,CAAvC;;AAEAJ,gBAAQC,GAAR,CAAYM,aAAaC,OAAb,CAAqB,iBAArB,CAAZ;AACAR,gBAAQC,GAAR,CAAYG,eAAZ;AACAJ,gBAAQC,GAAR,CAAYS,EAAE,IAAF,EAAQgB,MAAR,GAAiBK,QAAjB,CAA0B,WAA1B,EAAuCC,IAAvC,EAAZ;;AAEA,gBAzEG7B,UAyEH,gBAAaA,WAAW8B,MAAX,CAAkB,GAAlB,EAAsBvB,EAAE,IAAF,EAAQgB,MAAR,GAAiBK,QAAjB,CAA0B,WAA1B,EAAuCC,IAAvC,EAAtB,EAAoE,GAApE,CAAb;AACAzB,qBAAasB,OAAb,CAAqB,YAArB,EAAkCxB,KAAKyB,SAAL,CAAe3B,UAAf,CAAlC;;AAEAH,gBAAQC,GAAR,CAAY,aAAaE,UAAzB;AACH,KAnBD,MAmBO;AACHO,UAAE,IAAF,EAAQgB,MAAR,CAAe,SAAf,EAA0BC,IAA1B,CAA+B,aAA/B,EAA6C,EAA7C;AACAjB,UAAE,IAAF,EAAQwB,WAAR,CAAoB,QAApB;AACA,YAAIC,QAAQ/B,gBAAgBoB,OAAhB,CAAwBd,EAAE,IAAF,EAAQgB,MAAR,CAAe,SAAf,EAA0BC,IAA1B,CAA+B,SAA/B,CAAxB,CAAZ;AACA3B,gBAAQC,GAAR,CAAY,oBAAkBG,eAA9B;AACAA,wBAAgBgC,MAAhB,CAAuBD,KAAvB,EAA6B,CAA7B;AACA,YAAIE,aAAa3B,EAAE,IAAF,EAAQgB,MAAR,GAAiBK,QAAjB,CAA0B,WAA1B,EAAuCC,IAAvC,GAA8Cd,MAA/D;AACA,YAAIoB,YAAYnC,WAAWqB,OAAX,CAAmBd,EAAE,IAAF,EAAQgB,MAAR,GAAiBK,QAAjB,CAA0B,WAA1B,EAAuCC,IAAvC,EAAnB,CAAhB;AACAhC,gBAAQC,GAAR,QAAmBE,UAAnB,yCAAmBA,UAAnB;AACAH,gBAAQC,GAAR,CAAYE,UAAZ;AACA,gBAvFGA,UAuFH,gBAAaA,WAAWoC,OAAX,CAAmB7B,EAAE,IAAF,EAAQgB,MAAR,GAAiBK,QAAjB,CAA0B,WAA1B,EAAuCC,IAAvC,EAAnB,EAAkE,EAAlE,CAAb;AACAhC,gBAAQC,GAAR,CAAY,iBAAiBE,UAA7B;AACAI,qBAAasB,OAAb,CAAqB,YAArB,EAAkCxB,KAAKyB,SAAL,CAAe3B,UAAf,CAAlC;;AAGAI,qBAAasB,OAAb,CAAqB,iBAArB,EAAuCxB,KAAKyB,SAAL,CAAe1B,eAAf,CAAvC;AACAJ,gBAAQC,GAAR,CAAYI,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,iBAArB,CAAX,CAAZ;AACAR,gBAAQC,GAAR,CAAYG,eAAZ;AACH;AAEJ,CAxCD;;AA0CAM,EAAE,iBAAF,EAAqB8B,KAArB,CAA2B,YAAW;AACnC,QAAIC,SAAS,EAAb;AACAA,WAAOC,IAAP,GAAchC,EAAE,YAAF,EAAgBiC,GAAhB,EAAd;AACAF,WAAOG,IAAP,GAAclC,EAAE,YAAF,EAAgBiC,GAAhB,EAAd;;AAEA,QAAGF,OAAOG,IAAP,CAAY1B,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,6BAAMT,UAAN;;AAEAE,wBAAgBN,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,KAArB,CAAX,CAAhB;AACAG,sBAAciB,IAAd,CAAmBa,MAAnB;AACAlC,qBAAasB,OAAb,CAAqB,KAArB,EAA2BxB,KAAKyB,SAAL,CAAenB,aAAf,CAA3B;AACAA,wBAAgBN,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,KAArB,CAAX,CAAhB;;AAEAG,sBAAcQ,OAAd;AACAV,mBAAWW,MAAX,CAAkBR,YAAlB;;AAEAF,UAAE,YAAF,EAAgBmC,OAAhB,CAAwB,GAAxB,EAA4B,YAAW;AACnCnC,cAAE,SAAF,EAAawB,WAAb,CAAyB,cAAzB;AACAxB,cAAE,YAAF,EAAgBiC,GAAhB,CAAoB,EAApB;AACH,SAHD;AAIH;AACAG,UAAM,IAAN;AACH,CAtBD;;AAwBApC,EAAE,aAAF,EAAiB8B,KAAjB,CAAuB,YAAW;AAC9B9B,MAAE,YAAF,EAAgBmC,OAAhB,CAAwB,GAAxB,EAA4B,YAAW;AACnCnC,UAAE,SAAF,EAAawB,WAAb,CAAyB,cAAzB;AACAxB,UAAE,YAAF,EAAgBiC,GAAhB,CAAoB,EAApB;AACH,KAHD;AAIH,CALD","file":"myGallery.js","sourcesContent":["console.log(\"This is myGallery.js\");\nconsole.log(\"dd\");\nrequire('../styles/common/common.css');\nrequire('../styles/common/nav-container.css');\nrequire('../styles/MG/inputInfo.css');\nimport {libData} from './MG/libData';\nimport renderLIB from './MG/renderLIB';\nimport clear from './clear';\nexport let searchPath;\nsearchPath = \"\";\n//searchPath = \"/Users/petnakanojo/Documents/img\";    //这是一个假数据\n//localStorage.setItem(\"searchPathArray\",\"[]\");\nlet searchPathArray = JSON.parse(localStorage.getItem(\"searchPathArray\"));\nsearchPath = JSON.parse(localStorage.getItem(\"searchPath\"));\n\nconst targetNode = $(\"#gallery-container\");\nlet storedLIBData;\nlet divContainer = document.createElement(\"div\");\ndivContainer.setAttribute(\"id\",\"addNewBar-container\");\ndivContainer.className += \"ga-bar\";\ndivContainer.innerHTML = `\n        <p>添加新图库</p>\n        <div id=\"addNewBar\">\n        <p>+</p>\n        </div>\n    `;\n\n\nstoredLIBData = JSON.parse(localStorage.getItem(\"LIB\"));\nif (storedLIBData.length > 0) {\n    clear(targetNode);\n    storedLIBData.forEach(renderLIB);\n}\ntargetNode.append(divContainer);\n\n\n$(\"#addNewBar\").live(\"click\", function() {\n    console.log(\"ddd\");\n    $(\".ga-bar\").addClass(\"blur-display\");\n    $(\"#inputInfo\").fadeIn(200);\n});\n\n/*这是一个没用的监听事件\nlet searchBar = $(\"#pathValue\");\nsearchBar.bind(\"keyup\",function(event) {    //监听回车事件\n    let pathVal = $(\"#pathValue\").val();\n    var searchInfo = searchBar.val();\n    var event = event || window.event;\n    if (event.keyCode === 13) {\n        if (searchInfo.length !== 0) {\n            if(pathVal.length > 0) {\n                localStorage[\"LIB\"].forEach(renderLIB);\n            }\n            $(\"#inputInfo\").fadeOut(200,function() {\n                $(\".ga-bar\").removeClass(\"blur-display\");\n                $(\"#pathValue\").val(\"\");\n                $(\"#nameValue\").val(\"\");\n            });\n        } else {\n        }\n    }\n},false);\n*/\n\n//使用localstorage\n$(\".choose-path\").live(\"click\",function() {\n    if ((JSON.parse(localStorage.getItem(\"searchPathArray\"))).indexOf(parseInt($(this).parent(\".ga-bar\").attr(\"data-id\"))) < 0)  {\n        console.log($(this).parent(\".ga-bar\").attr(\"data-id\"));\n        console.log(\"ddd\"+JSON.parse(localStorage.getItem(\"searchPathArray\")));\n        console.log((JSON.parse(localStorage.getItem(\"searchPathArray\"))).indexOf($(this).parent(\".ga-bar\").attr(\"data-id\")));\n        console.log(\"kkk\");\n        $(this).parent(\".ga-bar\").attr(\"chooseornot\",\"yes\");\n        $(this).addClass(\"choose\");\n\n        searchPathArray.push(parseInt($(this).parent(\".ga-bar\").attr(\"data-id\")));\n        localStorage.setItem(\"searchPathArray\",JSON.stringify(searchPathArray));\n\n        console.log(localStorage.getItem(\"searchPathArray\"));\n        console.log(searchPathArray);\n        console.log($(this).parent().children(\".lib-path\").html());\n\n        searchPath = searchPath.concat(\" \",$(this).parent().children(\".lib-path\").html(),\" \");\n        localStorage.setItem(\"searchPath\",JSON.stringify(searchPath));\n\n        console.log(\"afterAdd\" + searchPath);\n    } else {\n        $(this).parent(\".ga-bar\").attr(\"chooseornot\",\"\");\n        $(this).removeClass(\"choose\");\n        let index = searchPathArray.indexOf($(this).parent(\".ga-bar\").attr(\"data-id\"));\n        console.log(\"searchPathArray\"+searchPathArray);\n        searchPathArray.splice(index,1);\n        let pathlength = $(this).parent().children(\".lib-path\").html().length;\n        let pathindex = searchPath.indexOf($(this).parent().children(\".lib-path\").html());\n        console.log(typeof(searchPath));\n        console.log(searchPath);\n        searchPath = searchPath.replace($(this).parent().children(\".lib-path\").html(), \"\");\n        console.log(\"afterReplace\" + searchPath);\n        localStorage.setItem(\"searchPath\",JSON.stringify(searchPath));\n\n\n        localStorage.setItem(\"searchPathArray\",JSON.stringify(searchPathArray));\n        console.log(JSON.parse(localStorage.getItem(\"searchPathArray\")));\n        console.log(searchPathArray);\n    }\n\n});\n\n$(\"#btn-addNewInfo\").click(function() {\n   let newLIB = {};\n   newLIB.name = $(\"#nameValue\").val();\n   newLIB.path = $(\"#pathValue\").val();\n\n   if(newLIB.path.length > 0) {\n       clear(targetNode);\n\n       storedLIBData = JSON.parse(localStorage.getItem(\"LIB\"));\n       storedLIBData.push(newLIB);\n       localStorage.setItem(\"LIB\",JSON.stringify(storedLIBData));\n       storedLIBData = JSON.parse(localStorage.getItem(\"LIB\"));\n\n       storedLIBData.forEach(renderLIB);\n       targetNode.append(divContainer);\n\n       $(\"#inputInfo\").fadeOut(200,function() {\n           $(\".ga-bar\").removeClass(\"blur-display\");\n           $(\"#pathValue\").val(\"\");\n       });\n   }\n    alert(\"ok\");\n});\n\n$(\"#btn-cancel\").click(function() {\n    $(\"#inputInfo\").fadeOut(200,function() {\n        $(\".ga-bar\").removeClass(\"blur-display\");\n        $(\"#pathValue\").val(\"\");\n    });\n});"]}